--
-- PostgreSQL database dump
--

-- Dumped from database version 15.4 (Debian 15.4-1.pgdg110+1)
-- Dumped by pg_dump version 15.4 (Debian 15.4-1.pgdg110+1)

SET statement_timeout = 0;
SET lock_timeout = 0;
SET idle_in_transaction_session_timeout = 0;
SET client_encoding = 'UTF8';
SET standard_conforming_strings = on;
SELECT pg_catalog.set_config('search_path', '', false);
SET check_function_bodies = false;
SET xmloption = content;
SET client_min_messages = warning;
SET row_security = off;

--
-- Name: topology; Type: SCHEMA; Schema: -; Owner: postgres
--

CREATE SCHEMA topology;


ALTER SCHEMA topology OWNER TO postgres;

--
-- Name: SCHEMA topology; Type: COMMENT; Schema: -; Owner: postgres
--

COMMENT ON SCHEMA topology IS 'PostGIS Topology schema';


--
-- Name: postgis; Type: EXTENSION; Schema: -; Owner: -
--

CREATE EXTENSION IF NOT EXISTS postgis WITH SCHEMA public;


--
-- Name: EXTENSION postgis; Type: COMMENT; Schema: -; Owner: 
--

COMMENT ON EXTENSION postgis IS 'PostGIS geometry and geography spatial types and functions';


--
-- Name: postgis_topology; Type: EXTENSION; Schema: -; Owner: -
--

CREATE EXTENSION IF NOT EXISTS postgis_topology WITH SCHEMA topology;


--
-- Name: EXTENSION postgis_topology; Type: COMMENT; Schema: -; Owner: 
--

COMMENT ON EXTENSION postgis_topology IS 'PostGIS topology spatial types and functions';


--
-- Name: school_ownership; Type: TYPE; Schema: public; Owner: postgres
--

CREATE TYPE public.school_ownership AS ENUM (
    'public',
    'private'
);


ALTER TYPE public.school_ownership OWNER TO postgres;

--
-- Name: school_type; Type: TYPE; Schema: public; Owner: postgres
--

CREATE TYPE public.school_type AS ENUM (
    'elementary',
    'junior_high',
    'high'
);


ALTER TYPE public.school_type OWNER TO postgres;

--
-- Name: update_updated_at_column(); Type: FUNCTION; Schema: public; Owner: postgres
--

CREATE FUNCTION public.update_updated_at_column() RETURNS trigger
    LANGUAGE plpgsql
    AS $$
BEGIN
    NEW.updated_at = CURRENT_TIMESTAMP;
    RETURN NEW;
END;
$$;


ALTER FUNCTION public.update_updated_at_column() OWNER TO postgres;

SET default_tablespace = '';

SET default_table_access_method = heap;

--
-- Name: areas; Type: TABLE; Schema: public; Owner: postgres
--

CREATE TABLE public.areas (
    id integer NOT NULL,
    ward_code text NOT NULL,
    town_code text NOT NULL,
    name text NOT NULL,
    geom public.geometry(Polygon,4326),
    created_at timestamp without time zone DEFAULT CURRENT_TIMESTAMP,
    updated_at timestamp without time zone DEFAULT CURRENT_TIMESTAMP
);


ALTER TABLE public.areas OWNER TO postgres;

--
-- Name: areas_id_seq; Type: SEQUENCE; Schema: public; Owner: postgres
--

CREATE SEQUENCE public.areas_id_seq
    AS integer
    START WITH 1
    INCREMENT BY 1
    NO MINVALUE
    NO MAXVALUE
    CACHE 1;


ALTER TABLE public.areas_id_seq OWNER TO postgres;

--
-- Name: areas_id_seq; Type: SEQUENCE OWNED BY; Schema: public; Owner: postgres
--

ALTER SEQUENCE public.areas_id_seq OWNED BY public.areas.id;


--
-- Name: crimes; Type: TABLE; Schema: public; Owner: postgres
--

CREATE TABLE public.crimes (
    id integer NOT NULL,
    category text NOT NULL,
    date date NOT NULL,
    location public.geometry(Point,4326),
    area_id integer,
    description text,
    created_at timestamp without time zone DEFAULT CURRENT_TIMESTAMP,
    updated_at timestamp without time zone DEFAULT CURRENT_TIMESTAMP
);


ALTER TABLE public.crimes OWNER TO postgres;

--
-- Name: crimes_id_seq; Type: SEQUENCE; Schema: public; Owner: postgres
--

CREATE SEQUENCE public.crimes_id_seq
    AS integer
    START WITH 1
    INCREMENT BY 1
    NO MINVALUE
    NO MAXVALUE
    CACHE 1;


ALTER TABLE public.crimes_id_seq OWNER TO postgres;

--
-- Name: crimes_id_seq; Type: SEQUENCE OWNED BY; Schema: public; Owner: postgres
--

ALTER SEQUENCE public.crimes_id_seq OWNED BY public.crimes.id;


--
-- Name: schools; Type: TABLE; Schema: public; Owner: postgres
--

CREATE TABLE public.schools (
    id integer NOT NULL,
    name text NOT NULL,
    type public.school_type NOT NULL,
    public_private public.school_ownership NOT NULL,
    location public.geometry(Point,4326),
    area_id integer,
    address text,
    created_at timestamp without time zone DEFAULT CURRENT_TIMESTAMP,
    updated_at timestamp without time zone DEFAULT CURRENT_TIMESTAMP,
    safety_score integer DEFAULT 50,
    score_updated_at timestamp without time zone DEFAULT CURRENT_TIMESTAMP
);


ALTER TABLE public.schools OWNER TO postgres;

--
-- Name: COLUMN schools.safety_score; Type: COMMENT; Schema: public; Owner: postgres
--

COMMENT ON COLUMN public.schools.safety_score IS '安全スコア (0-100, 高いほど安全)';


--
-- Name: COLUMN schools.score_updated_at; Type: COMMENT; Schema: public; Owner: postgres
--

COMMENT ON COLUMN public.schools.score_updated_at IS '安全スコア最終更新日時';


--
-- Name: schools_id_seq; Type: SEQUENCE; Schema: public; Owner: postgres
--

CREATE SEQUENCE public.schools_id_seq
    AS integer
    START WITH 1
    INCREMENT BY 1
    NO MINVALUE
    NO MAXVALUE
    CACHE 1;


ALTER TABLE public.schools_id_seq OWNER TO postgres;

--
-- Name: schools_id_seq; Type: SEQUENCE OWNED BY; Schema: public; Owner: postgres
--

ALTER SEQUENCE public.schools_id_seq OWNED BY public.schools.id;


--
-- Name: temp_crimes_import; Type: TABLE; Schema: public; Owner: postgres
--

CREATE TABLE public.temp_crimes_import (
    crime_type text,
    occurrence_datetime timestamp without time zone,
    location_address text,
    latitude double precision,
    longitude double precision,
    ward_code text,
    crime_date text
);


ALTER TABLE public.temp_crimes_import OWNER TO postgres;

--
-- Name: areas id; Type: DEFAULT; Schema: public; Owner: postgres
--

ALTER TABLE ONLY public.areas ALTER COLUMN id SET DEFAULT nextval('public.areas_id_seq'::regclass);


--
-- Name: crimes id; Type: DEFAULT; Schema: public; Owner: postgres
--

ALTER TABLE ONLY public.crimes ALTER COLUMN id SET DEFAULT nextval('public.crimes_id_seq'::regclass);


--
-- Name: schools id; Type: DEFAULT; Schema: public; Owner: postgres
--

ALTER TABLE ONLY public.schools ALTER COLUMN id SET DEFAULT nextval('public.schools_id_seq'::regclass);


--
-- Data for Name: areas; Type: TABLE DATA; Schema: public; Owner: postgres
--

COPY public.areas (id, ward_code, town_code, name, geom, created_at, updated_at) FROM stdin;
1	13101	001	千代田区丸の内	0103000020E61000000100000005000000B81E85EB51786140D7A3703D0AD74140713D0AD7A3786140D7A3703D0AD74140713D0AD7A3786140B81E85EB51D84140B81E85EB51786140B81E85EB51D84140B81E85EB51786140D7A3703D0AD74140	2025-08-24 06:44:05.339964	2025-08-24 06:44:05.339964
2	13102	001	中央区銀座	0103000020E61000000100000005000000B81E85EB51786140F6285C8FC2D54140713D0AD7A3786140F6285C8FC2D54140713D0AD7A3786140D7A3703D0AD74140B81E85EB51786140D7A3703D0AD74140B81E85EB51786140F6285C8FC2D54140	2025-08-24 06:44:05.339964	2025-08-24 06:44:05.339964
3	13113	001	渋谷	0103000020E610000001000000050000000AD7A3703D766140A4703D0AD7D34140C3F5285C8F766140A4703D0AD7D34140C3F5285C8F76614085EB51B81ED541400AD7A3703D76614085EB51B81ED541400AD7A3703D766140A4703D0AD7D34140	2025-08-24 10:56:45.464285	2025-08-24 10:56:45.464285
4	13113	002	道玄坂	0103000020E610000001000000050000001904560E2D7661406ABC749318D44140D122DBF97E7661406ABC749318D44140D122DBF97E7661404C37894160D541401904560E2D7661404C37894160D541401904560E2D7661406ABC749318D44140	2025-08-24 10:56:45.464285	2025-08-24 10:56:45.464285
5	13113	003	宇田川町	0103000020E61000000100000005000000FCA9F1D24D76614014AE47E17AD44140B4C876BE9F76614014AE47E17AD44140B4C876BE9F766140F6285C8FC2D54140FCA9F1D24D766140F6285C8FC2D54140FCA9F1D24D76614014AE47E17AD44140	2025-08-24 10:56:45.464285	2025-08-24 10:56:45.464285
6	13103	001	六本木	0103000020E610000001000000050000008FC2F5285C776140DBF97E6ABCD4414048E17A14AE776140DBF97E6ABCD4414048E17A14AE776140BC74931804D641408FC2F5285C776140BC74931804D641408FC2F5285C776140DBF97E6ABCD44140	2025-08-24 10:56:45.510104	2025-08-24 10:56:45.510104
7	13103	002	青山	0103000020E610000001000000050000007B14AE47E1766140F6285C8FC2D541403333333333776140F6285C8FC2D541403333333333776140D7A3703D0AD741407B14AE47E1766140D7A3703D0AD741407B14AE47E1766140F6285C8FC2D54140	2025-08-24 10:56:45.510104	2025-08-24 10:56:45.510104
8	13103	003	赤坂	0103000020E61000000100000005000000EC51B81E857761406666666666D64140A4703D0AD77761406666666666D64140A4703D0AD777614048E17A14AED74140EC51B81E8577614048E17A14AED74140EC51B81E857761406666666666D64140	2025-08-24 10:56:45.510104	2025-08-24 10:56:45.510104
9	13113	001	渋谷	0103000020E610000001000000050000000AD7A3703D766140A4703D0AD7D34140C3F5285C8F766140A4703D0AD7D34140C3F5285C8F76614085EB51B81ED541400AD7A3703D76614085EB51B81ED541400AD7A3703D766140A4703D0AD7D34140	2025-08-24 10:58:23.203642	2025-08-24 10:58:23.203642
10	13113	002	道玄坂	0103000020E610000001000000050000001904560E2D7661406ABC749318D44140D122DBF97E7661406ABC749318D44140D122DBF97E7661404C37894160D541401904560E2D7661404C37894160D541401904560E2D7661406ABC749318D44140	2025-08-24 10:58:23.203642	2025-08-24 10:58:23.203642
11	13113	003	宇田川町	0103000020E61000000100000005000000FCA9F1D24D76614014AE47E17AD44140B4C876BE9F76614014AE47E17AD44140B4C876BE9F766140F6285C8FC2D54140FCA9F1D24D766140F6285C8FC2D54140FCA9F1D24D76614014AE47E17AD44140	2025-08-24 10:58:23.203642	2025-08-24 10:58:23.203642
12	13103	001	六本木	0103000020E610000001000000050000008FC2F5285C776140DBF97E6ABCD4414048E17A14AE776140DBF97E6ABCD4414048E17A14AE776140BC74931804D641408FC2F5285C776140BC74931804D641408FC2F5285C776140DBF97E6ABCD44140	2025-08-24 10:58:23.249148	2025-08-24 10:58:23.249148
13	13103	002	青山	0103000020E610000001000000050000007B14AE47E1766140F6285C8FC2D541403333333333776140F6285C8FC2D541403333333333776140D7A3703D0AD741407B14AE47E1766140D7A3703D0AD741407B14AE47E1766140F6285C8FC2D54140	2025-08-24 10:58:23.249148	2025-08-24 10:58:23.249148
14	13103	003	赤坂	0103000020E61000000100000005000000EC51B81E857761406666666666D64140A4703D0AD77761406666666666D64140A4703D0AD777614048E17A14AED74140EC51B81E8577614048E17A14AED74140EC51B81E857761406666666666D64140	2025-08-24 10:58:23.249148	2025-08-24 10:58:23.249148
15	13106	001	浅草	0103000020E610000001000000050000004C378941607961404260E5D022DB414004560E2DB27961404260E5D022DB414004560E2DB279614023DBF97E6ADC41404C3789416079614023DBF97E6ADC41404C378941607961404260E5D022DB4140	2025-08-24 11:46:53.858461	2025-08-24 11:46:53.858461
16	13106	002	上野	0103000020E61000000100000005000000DBF97E6ABC786140D122DBF97EDA4140931804560E796140D122DBF97EDA4140931804560E796140B29DEFA7C6DB4140DBF97E6ABC786140B29DEFA7C6DB4140DBF97E6ABC786140D122DBF97EDA4140	2025-08-24 11:46:53.858461	2025-08-24 11:46:53.858461
17	13106	003	浅草橋	0103000020E6100000010000000500000085EB51B81E796140295C8FC2F5D841403D0AD7A370796140295C8FC2F5D841403D0AD7A3707961400AD7A3703DDA414085EB51B81E7961400AD7A3703DDA414085EB51B81E796140295C8FC2F5D84140	2025-08-24 11:46:53.858461	2025-08-24 11:46:53.858461
18	13106	004	蔵前	0103000020E61000000100000005000000E17A14AE477961409A99999999D941409A999999997961409A99999999D941409A999999997961407B14AE47E1DA4140E17A14AE477961407B14AE47E1DA4140E17A14AE477961409A99999999D94140	2025-08-24 11:46:53.858461	2025-08-24 11:46:53.858461
19	13105	001	本郷	0103000020E610000001000000050000005C8FC2F528786140D122DBF97EDA414014AE47E17A786140D122DBF97EDA414014AE47E17A786140B29DEFA7C6DB41405C8FC2F528786140B29DEFA7C6DB41405C8FC2F528786140D122DBF97EDA4140	2025-08-24 11:46:57.825837	2025-08-24 11:46:57.825837
20	13105	002	湯島	0103000020E610000001000000050000007F6ABC74937861400AD7A3703DDA414037894160E57861400AD7A3703DDA414037894160E5786140EC51B81E85DB41407F6ABC7493786140EC51B81E85DB41407F6ABC74937861400AD7A3703DDA4140	2025-08-24 11:46:57.825837	2025-08-24 11:46:57.825837
21	13105	003	千駄木	0103000020E61000000100000005000000B81E85EB5178614023DBF97E6ADC4140713D0AD7A378614023DBF97E6ADC4140713D0AD7A378614004560E2DB2DD4140B81E85EB5178614004560E2DB2DD4140B81E85EB5178614023DBF97E6ADC4140	2025-08-24 11:46:57.825837	2025-08-24 11:46:57.825837
22	13105	004	根津	0103000020E6100000010000000500000023DBF97E6A7861405C8FC2F528DC4140DBF97E6ABC7861405C8FC2F528DC4140DBF97E6ABC7861403D0AD7A370DD414023DBF97E6A7861403D0AD7A370DD414023DBF97E6A7861405C8FC2F528DC4140	2025-08-24 11:46:57.825837	2025-08-24 11:46:57.825837
\.


--
-- Data for Name: crimes; Type: TABLE DATA; Schema: public; Owner: postgres
--

COPY public.crimes (id, category, date, location, area_id, description, created_at, updated_at) FROM stdin;
1	窃盗	2024-01-15	0101000020E61000008D976E12837861402B8716D9CED74140	1	バッグのひったくり	2025-08-24 06:44:05.364121	2025-08-24 06:44:05.364121
2	暴行	2024-01-20	0101000020E61000008D976E12837861404A0C022B87D64140	2	路上での暴行事件	2025-08-24 06:44:05.364121	2025-08-24 06:44:05.364121
3	窃盗	2024-08-01	0101000020E6100000DF4F8D976E766140F853E3A59BD44140	3	スクランブル交差点付近でのスリ	2025-08-24 10:56:45.514751	2025-08-24 10:56:45.514751
4	暴行	2024-08-03	0101000020E61000005839B4C876766140DBF97E6ABCD44140	3	深夜の路上トラブル	2025-08-24 10:56:45.514751	2025-08-24 10:56:45.514751
5	器物損壊	2024-08-05	0101000020E6100000666666666676614014AE47E17AD44140	3	電柱への落書き	2025-08-24 10:56:45.514751	2025-08-24 10:56:45.514751
6	窃盗	2024-08-08	0101000020E6100000D122DBF97E766140BE9F1A2FDDD44140	3	駅構内での置き引き	2025-08-24 10:56:45.514751	2025-08-24 10:56:45.514751
7	詐欺	2024-08-10	0101000020E610000075931804567661404E62105839D44140	3	キャッチセールス詐欺	2025-08-24 10:56:45.514751	2025-08-24 10:56:45.514751
8	暴行	2024-08-02	0101000020E61000000AD7A3703D7661403108AC1C5AD44140	4	飲み屋街でのケンカ	2025-08-24 10:56:45.514751	2025-08-24 10:56:45.514751
9	窃盗	2024-08-06	0101000020E6100000FCA9F1D24D766140F853E3A59BD44140	4	カラオケ店での財布盗難	2025-08-24 10:56:45.514751	2025-08-24 10:56:45.514751
10	器物損壊	2024-08-12	0101000020E6100000EE7C3F355E766140BE9F1A2FDDD44140	4	看板の破損	2025-08-24 10:56:45.514751	2025-08-24 10:56:45.514751
11	窃盗	2024-08-04	0101000020E6100000DF4F8D976E766140A245B6F3FDD44140	5	商業施設での万引き	2025-08-24 10:56:45.514751	2025-08-24 10:56:45.514751
12	詐欺	2024-08-09	0101000020E6100000D122DBF97E7661406891ED7C3FD54140	5	ネットカフェでの詐欺被害	2025-08-24 10:56:45.514751	2025-08-24 10:56:45.514751
13	暴行	2024-08-01	0101000020E61000008195438B6C776140A245B6F3FDD44140	6	クラブ前でのトラブル	2025-08-24 10:56:45.530458	2025-08-24 10:56:45.530458
14	窃盗	2024-08-05	0101000020E6100000643BDF4F8D7761402FDD240681D54140	6	高級車からの盗難	2025-08-24 10:56:45.530458	2025-08-24 10:56:45.530458
15	詐欺	2024-08-08	0101000020E6100000736891ED7C7761406891ED7C3FD54140	6	ぼったくりバー被害	2025-08-24 10:56:45.530458	2025-08-24 10:56:45.530458
16	窃盗	2024-08-12	0101000020E6100000560E2DB29D776140F6285C8FC2D54140	6	レストランでのバッグ盗難	2025-08-24 10:56:45.530458	2025-08-24 10:56:45.530458
17	窃盗	2024-08-03	0101000020E61000006DE7FBA9F1766140BC74931804D64140	7	オフィスビルでの置き引き	2025-08-24 10:56:45.530458	2025-08-24 10:56:45.530458
18	器物損壊	2024-08-07	0101000020E6100000508D976E127761404A0C022B87D64140	7	駐車場での車両損傷	2025-08-24 10:56:45.530458	2025-08-24 10:56:45.530458
19	詐欺	2024-08-11	0101000020E61000005EBA490C0277614083C0CAA145D64140	7	投資詐欺被害	2025-08-24 10:56:45.530458	2025-08-24 10:56:45.530458
20	窃盗	2024-08-06	0101000020E6100000DD240681957761402DB29DEFA7D64140	8	ホテルロビーでのスリ	2025-08-24 10:56:45.530458	2025-08-24 10:56:45.530458
21	詐欺	2024-08-10	0101000020E6100000C1CAA145B6776140BA490C022BD74140	8	名刺交換詐欺	2025-08-24 10:56:45.530458	2025-08-24 10:56:45.530458
22	窃盗	2024-08-01	0101000020E6100000B6F3FDD478796140EC51B81E85DB4140	15	浅草寺境内での観光客狙いのスリ	2025-08-24 11:47:10.59328	2025-08-24 11:47:10.59328
23	詐欺	2024-08-03	0101000020E6100000A8C64B3789796140B29DEFA7C6DB4140	15	仲見世通りでの偽物販売	2025-08-24 11:47:10.59328	2025-08-24 11:47:10.59328
24	窃盗	2024-08-02	0101000020E610000046B6F3FDD47861407B14AE47E1DA4140	16	上野動物園での財布盗難	2025-08-24 11:47:10.59328	2025-08-24 11:47:10.59328
25	器物損壊	2024-08-06	0101000020E610000037894160E57861404260E5D022DB4140	16	国立博物館周辺での自転車破損	2025-08-24 11:47:10.59328	2025-08-24 11:47:10.59328
26	窃盗	2024-08-04	0101000020E6100000F0A7C64B37796140D34D621058D94140	17	問屋街での商品盗難	2025-08-24 11:47:10.59328	2025-08-24 11:47:10.59328
27	窃盗	2024-08-01	0101000020E6100000C74B3789417861407B14AE47E1DA4140	19	大学図書館での財布盗難	2025-08-24 11:47:10.59328	2025-08-24 11:47:10.59328
28	詐欺	2024-08-12	0101000020E6100000B81E85EB517861404260E5D022DB4140	19	大学生狙いの投資詐欺	2025-08-24 11:47:10.59328	2025-08-24 11:47:10.59328
29	窃盗	2024-08-03	0101000020E6100000E9263108AC786140B4C876BE9FDA4140	20	湯島天神での賽銭泥棒	2025-08-24 11:47:10.59328	2025-08-24 11:47:10.59328
30	窃盗	2024-08-06	0101000020E610000014AE47E17A786140931804560EDD4140	21	住宅街での自転車盗難	2025-08-24 11:47:10.59328	2025-08-24 11:47:10.59328
31	窃盗	2024-08-09	0101000020E61000007F6ABC7493786140CDCCCCCCCCDC4140	22	商店街でのレジ金盗難	2025-08-24 11:47:10.59328	2025-08-24 11:47:10.59328
\.


--
-- Data for Name: schools; Type: TABLE DATA; Schema: public; Owner: postgres
--

COPY public.schools (id, name, type, public_private, location, area_id, address, created_at, updated_at, safety_score, score_updated_at) FROM stdin;
1	東京小学校	elementary	public	0101000020E610000014AE47E17A78614048E17A14AED74140	1	東京都千代田区丸の内1-1-1	2025-08-24 06:44:05.354641	2025-08-24 06:44:05.354641	50	2025-08-26 13:32:42.521426
2	銀座中学校	junior_high	public	0101000020E610000014AE47E17A7861406666666666D64140	2	東京都中央区銀座1-1-1	2025-08-24 06:44:05.354641	2025-08-24 06:44:05.354641	50	2025-08-26 13:32:42.521426
5	台東区立浅草小学校	elementary	public	0101000020E61000002FDD240681796140CFF753E3A5DB4140	15	東京都台東区浅草2-25-16	2025-08-24 11:47:02.112517	2025-08-24 11:47:02.112517	50	2025-08-26 13:32:42.521426
6	台東区立上野小学校	elementary	public	0101000020E6100000BE9F1A2FDD7861405EBA490C02DB4140	16	東京都台東区東上野6-16-8	2025-08-24 11:47:02.112517	2025-08-24 11:47:02.112517	50	2025-08-26 13:32:42.521426
7	上野学園中学校	junior_high	private	0101000020E6100000B0726891ED7861402506819543DB4140	16	東京都台東区東上野4-24-12	2025-08-24 11:47:02.112517	2025-08-24 11:47:02.112517	50	2025-08-26 13:32:42.521426
8	台東区立浅草橋小学校	elementary	public	0101000020E61000006891ED7C3F796140B6F3FDD478D94140	17	東京都台東区浅草橋2-17-7	2025-08-24 11:47:02.112517	2025-08-24 11:47:02.112517	50	2025-08-26 13:32:42.521426
9	台東区立蔵前小学校	elementary	public	0101000020E6100000C520B07268796140273108AC1CDA4140	18	東京都台東区蔵前4-19-15	2025-08-24 11:47:02.112517	2025-08-24 11:47:02.112517	50	2025-08-26 13:32:42.521426
10	文京区立本郷小学校	elementary	public	0101000020E61000003F355EBA497861405EBA490C02DB4140	19	東京都文京区本郷4-5-15	2025-08-24 11:47:06.501814	2025-08-24 11:47:06.501814	50	2025-08-26 13:32:42.521426
11	郁文館中学校	junior_high	private	0101000020E61000003108AC1C5A7861402506819543DB4140	19	東京都文京区向丘2-19-1	2025-08-24 11:47:06.501814	2025-08-24 11:47:06.501814	50	2025-08-26 13:32:42.521426
12	文京区立湯島小学校	elementary	public	0101000020E610000062105839B4786140986E1283C0DA4140	20	東京都文京区湯島2-28-14	2025-08-24 11:47:06.501814	2025-08-24 11:47:06.501814	50	2025-08-26 13:32:42.521426
13	文京区立千駄木小学校	elementary	public	0101000020E61000009CC420B072786140B0726891EDDC4140	21	東京都文京区千駄木2-19-22	2025-08-24 11:47:06.501814	2025-08-24 11:47:06.501814	50	2025-08-26 13:32:42.521426
14	文京区立根津小学校	elementary	public	0101000020E6100000068195438B786140E9263108ACDC4140	22	東京都文京区根津2-14-16	2025-08-24 11:47:06.501814	2025-08-24 11:47:06.501814	50	2025-08-26 13:32:42.521426
\.


--
-- Data for Name: spatial_ref_sys; Type: TABLE DATA; Schema: public; Owner: postgres
--

COPY public.spatial_ref_sys (srid, auth_name, auth_srid, srtext, proj4text) FROM stdin;
\.


--
-- Data for Name: temp_crimes_import; Type: TABLE DATA; Schema: public; Owner: postgres
--

COPY public.temp_crimes_import (crime_type, occurrence_datetime, location_address, latitude, longitude, ward_code, crime_date) FROM stdin;
路上強盗	2024-01-16 22:15:00	文京区本郷3-3-3	35.7089	139.7624	13105	2024-01-16
侵入窃盗	2024-01-15 10:30:00	台東区浅草1-1-1	35.7148	139.7967	13106	2024-01-15
自転車盗	2024-01-17 14:20:00	台東区上野2-2-2	35.709	139.774	13106	2024-01-17
\.


--
-- Data for Name: topology; Type: TABLE DATA; Schema: topology; Owner: postgres
--

COPY topology.topology (id, name, srid, "precision", hasz) FROM stdin;
\.


--
-- Data for Name: layer; Type: TABLE DATA; Schema: topology; Owner: postgres
--

COPY topology.layer (topology_id, layer_id, schema_name, table_name, feature_column, feature_type, level, child_id) FROM stdin;
\.


--
-- Name: areas_id_seq; Type: SEQUENCE SET; Schema: public; Owner: postgres
--

SELECT pg_catalog.setval('public.areas_id_seq', 30, true);


--
-- Name: crimes_id_seq; Type: SEQUENCE SET; Schema: public; Owner: postgres
--

SELECT pg_catalog.setval('public.crimes_id_seq', 31, true);


--
-- Name: schools_id_seq; Type: SEQUENCE SET; Schema: public; Owner: postgres
--

SELECT pg_catalog.setval('public.schools_id_seq', 15, true);


--
-- Name: topology_id_seq; Type: SEQUENCE SET; Schema: topology; Owner: postgres
--

SELECT pg_catalog.setval('topology.topology_id_seq', 1, false);


--
-- Name: areas areas_pkey; Type: CONSTRAINT; Schema: public; Owner: postgres
--

ALTER TABLE ONLY public.areas
    ADD CONSTRAINT areas_pkey PRIMARY KEY (id);


--
-- Name: crimes crimes_pkey; Type: CONSTRAINT; Schema: public; Owner: postgres
--

ALTER TABLE ONLY public.crimes
    ADD CONSTRAINT crimes_pkey PRIMARY KEY (id);


--
-- Name: schools schools_pkey; Type: CONSTRAINT; Schema: public; Owner: postgres
--

ALTER TABLE ONLY public.schools
    ADD CONSTRAINT schools_pkey PRIMARY KEY (id);


--
-- Name: idx_areas_geom; Type: INDEX; Schema: public; Owner: postgres
--

CREATE INDEX idx_areas_geom ON public.areas USING gist (geom);


--
-- Name: idx_areas_town_code; Type: INDEX; Schema: public; Owner: postgres
--

CREATE INDEX idx_areas_town_code ON public.areas USING btree (town_code);


--
-- Name: idx_areas_ward_code; Type: INDEX; Schema: public; Owner: postgres
--

CREATE INDEX idx_areas_ward_code ON public.areas USING btree (ward_code);


--
-- Name: idx_crimes_area_id; Type: INDEX; Schema: public; Owner: postgres
--

CREATE INDEX idx_crimes_area_id ON public.crimes USING btree (area_id);


--
-- Name: idx_crimes_category; Type: INDEX; Schema: public; Owner: postgres
--

CREATE INDEX idx_crimes_category ON public.crimes USING btree (category);


--
-- Name: idx_crimes_date; Type: INDEX; Schema: public; Owner: postgres
--

CREATE INDEX idx_crimes_date ON public.crimes USING btree (date);


--
-- Name: idx_crimes_location; Type: INDEX; Schema: public; Owner: postgres
--

CREATE INDEX idx_crimes_location ON public.crimes USING gist (location);


--
-- Name: idx_schools_area_id; Type: INDEX; Schema: public; Owner: postgres
--

CREATE INDEX idx_schools_area_id ON public.schools USING btree (area_id);


--
-- Name: idx_schools_location; Type: INDEX; Schema: public; Owner: postgres
--

CREATE INDEX idx_schools_location ON public.schools USING gist (location);


--
-- Name: idx_schools_safety_score; Type: INDEX; Schema: public; Owner: postgres
--

CREATE INDEX idx_schools_safety_score ON public.schools USING btree (safety_score);


--
-- Name: idx_schools_type; Type: INDEX; Schema: public; Owner: postgres
--

CREATE INDEX idx_schools_type ON public.schools USING btree (type);


--
-- Name: areas update_areas_updated_at; Type: TRIGGER; Schema: public; Owner: postgres
--

CREATE TRIGGER update_areas_updated_at BEFORE UPDATE ON public.areas FOR EACH ROW EXECUTE FUNCTION public.update_updated_at_column();


--
-- Name: crimes update_crimes_updated_at; Type: TRIGGER; Schema: public; Owner: postgres
--

CREATE TRIGGER update_crimes_updated_at BEFORE UPDATE ON public.crimes FOR EACH ROW EXECUTE FUNCTION public.update_updated_at_column();


--
-- Name: schools update_schools_updated_at; Type: TRIGGER; Schema: public; Owner: postgres
--

CREATE TRIGGER update_schools_updated_at BEFORE UPDATE ON public.schools FOR EACH ROW EXECUTE FUNCTION public.update_updated_at_column();


--
-- Name: crimes crimes_area_id_fkey; Type: FK CONSTRAINT; Schema: public; Owner: postgres
--

ALTER TABLE ONLY public.crimes
    ADD CONSTRAINT crimes_area_id_fkey FOREIGN KEY (area_id) REFERENCES public.areas(id);


--
-- Name: schools schools_area_id_fkey; Type: FK CONSTRAINT; Schema: public; Owner: postgres
--

ALTER TABLE ONLY public.schools
    ADD CONSTRAINT schools_area_id_fkey FOREIGN KEY (area_id) REFERENCES public.areas(id);


--
-- PostgreSQL database dump complete
--

